<VirtualHost *:80> 
  ServerName roverpi.local
  ServerAlias roverpi.local

  Redirect permanent / https://roverpi.local/
</VirtualHost>


<VirtualHost *:443>
	# Add machine's IP address (use ifconfig command)
	ServerName roverpi.local

	Protocols h2 http/1.1

	SSLEngine on
	SSLCertificateFile /etc/ssl/certs/apache-selfsigned.crt
	SSLCertificateKeyFile /etc/ssl/private/apache-selfsigned.key

	DocumentRoot /usr/local/www/rover/

	# Give an alias to to start your website url with
	WSGIDaemonProcess api_cleaner threads=5
	WSGIScriptAlias / /usr/local/www/rover/django_middleware/api_cleaner.wsgi
	WSGIApplicationGroup %{GLOBAL}

	# Allow auth headers through
	WSGIPassAuthorization On

	<Directory api_cleaner>
		WSGIProcessGroup api_cleaner
		WSGIApplicationGroup %{GLOBAL}
		Order deny,allow
		Require all granted
	</Directory>

	ErrorLog ${APACHE_LOG_DIR}/error.log

	LogLevel warn
	CustomLog ${APACHE_LOG_DIR}/access.log combined

</VirtualHost>